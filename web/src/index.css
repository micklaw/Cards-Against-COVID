@import url('https://fonts.googleapis.com/css?family=Droid+Sans+Mono');
@import "tailwindcss";

@custom-variant dark (&:where(.dark, .dark *));

@theme {
  /* Light theme colors */
  --color-primary: #3b82f6;
  --color-primary-hover: #2563eb;
  --color-secondary: #6b7280;
  --color-success: #22c55e;
  --color-success-hover: #16a34a;
  --color-danger: #ef4444;
  --color-danger-hover: #dc2626;
  --color-warning: #f59e0b;
  --color-warning-hover: #d97706;
  --color-info: #06b6d4;
  
  /* Card colors */
  --color-card-black: #000000;
  --color-card-white: #ffffff;
  --color-card-back: #1a1a2e;
  --color-card-back-gradient: #0f3460;
  --color-card-accent: #e94560;
  
  /* Winner colors */
  --color-gold: #ffd700;
}

/* Base styles */
@layer base {
  html {
    @apply h-full;
  }
  
  body {
    @apply h-full m-0 p-0 font-sans antialiased;
    @apply bg-gray-100 text-gray-900;
    @apply dark:bg-gray-900 dark:text-white;
  }
  
  #root {
    @apply w-full min-h-screen flex flex-col;
  }
  
  a {
    @apply text-primary dark:text-blue-400 no-underline;
  }
  
  a:hover, a:focus {
    @apply text-primary-hover dark:text-blue-300;
  }
}

/* Component styles */
@layer components {
  /* Cover container */
  .cover-container {
    @apply w-full max-w-5xl mx-auto px-4;
  }
  
  /* Aligner for centering content */
  .aligner {
    @apply flex items-center justify-center min-h-[calc(100vh-150px)] w-full;
  }
  
  .aligner > main {
    @apply flex-1;
  }
  
  /* Cover section */
  .cover {
    @apply px-6;
  }
  
  .cover-heading {
    @apply text-4xl md:text-5xl font-bold mb-8 text-center;
    @apply text-gray-900 dark:text-white;
  }
  
  /* Inner content padding */
  .inner {
    @apply p-4;
  }
  
  /* Masthead / Header */
  .masthead {
    @apply mb-auto;
  }
  
  .masthead-brand {
    @apply text-2xl font-bold m-0;
    @apply text-gray-900 dark:text-white;
  }
  
  /* Navigation */
  .nav-masthead {
    @apply flex justify-center gap-0;
  }
  
  .nav-link {
    @apply px-4 py-1 font-bold cursor-pointer no-underline;
    @apply text-gray-500 dark:text-gray-400;
    @apply border-b-4 border-transparent;
    @apply bg-transparent;
    @apply transition-colors duration-200;
  }
  
  .nav-link:hover, .nav-link:focus {
    @apply border-gray-300 dark:border-gray-600;
  }
  
  .nav-link.active {
    @apply text-gray-900 dark:text-white;
    @apply border-primary dark:border-blue-400;
  }
  
  /* Game input */
  .game-input {
    @apply text-lg px-4 py-3 rounded-lg w-full;
    @apply bg-white dark:bg-gray-800;
    @apply border border-gray-300 dark:border-gray-600;
    @apply text-gray-900 dark:text-white;
    @apply placeholder-gray-500 dark:placeholder-gray-400;
    @apply focus:ring-2 focus:ring-primary focus:border-primary;
    @apply outline-none transition-all;
  }
  
  /* Cards */
  .game-card {
    @apply rounded-2xl h-[450px] w-72 mx-auto relative overflow-hidden;
    @apply border shadow-lg;
    @apply transition-all duration-300;
  }
  
  .game-card.black-bg {
    @apply bg-black text-white border-gray-700;
  }
  
  .game-card.white-bg {
    @apply bg-white text-black border-gray-200;
    @apply dark:bg-gray-100 dark:text-gray-900;
  }
  
  .card-body {
    @apply p-5 text-left;
  }
  
  .card-title {
    @apply text-2xl font-semibold break-words;
  }
  
  /* Response list */
  .response-list {
    @apply w-72 inline-block align-top m-2;
  }
  
  /* Tables */
  .game-table {
    @apply w-full border-collapse;
  }
  
  .game-table th,
  .game-table td {
    @apply px-4 py-3 border-t;
    @apply border-gray-200 dark:border-gray-700;
  }
  
  .game-table thead th {
    @apply border-b-2 font-semibold;
    @apply bg-gray-100 dark:bg-gray-800;
    @apply border-gray-300 dark:border-gray-600;
  }
  
  .game-table tbody tr {
    @apply bg-white dark:bg-gray-800;
    @apply hover:bg-gray-50 dark:hover:bg-gray-700;
    @apply transition-colors;
  }
  
  /* Alerts */
  .alert {
    @apply px-4 py-3 rounded-lg mb-4;
    @apply border;
  }
  
  .alert-primary {
    @apply bg-blue-100 dark:bg-blue-900/30;
    @apply text-blue-800 dark:text-blue-200;
    @apply border-blue-300 dark:border-blue-700;
  }
  
  /* Buttons */
  .btn {
    @apply inline-flex items-center justify-center;
    @apply px-4 py-2 rounded-lg font-medium;
    @apply cursor-pointer select-none;
    @apply border border-transparent;
    @apply transition-all duration-200;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
  }
  
  .btn-primary {
    @apply bg-primary text-white;
    @apply hover:bg-primary-hover;
    @apply focus:ring-2 focus:ring-primary focus:ring-offset-2;
    @apply dark:focus:ring-offset-gray-900;
  }
  
  .btn-secondary {
    @apply bg-gray-200 text-gray-800;
    @apply hover:bg-gray-300;
    @apply dark:bg-gray-700 dark:text-gray-200;
    @apply dark:hover:bg-gray-600;
  }
  
  .btn-success {
    @apply bg-success text-white;
    @apply hover:bg-success-hover;
  }
  
  .btn-danger {
    @apply bg-danger text-white;
    @apply hover:bg-danger-hover;
  }
  
  .btn-warning {
    @apply bg-warning text-gray-900;
    @apply hover:bg-warning-hover;
  }
  
  .btn-info {
    @apply bg-info text-white;
    @apply hover:opacity-90;
  }
  
  .btn-sm {
    @apply px-3 py-1.5 text-sm;
  }
  
  /* Form controls */
  .form-control {
    @apply w-full px-3 py-2 rounded-lg;
    @apply bg-white dark:bg-gray-800;
    @apply border border-gray-300 dark:border-gray-600;
    @apply text-gray-900 dark:text-white;
    @apply focus:ring-2 focus:ring-primary focus:border-primary;
    @apply outline-none transition-all;
  }
  
  /* Input group */
  .input-group {
    @apply flex flex-wrap items-stretch w-full;
  }
  
  .input-group > .form-control,
  .input-group > .game-input {
    @apply flex-1 min-w-0 rounded-r-none;
  }
  
  .input-group-append {
    @apply flex -ml-px;
  }
  
  .input-group-append > .btn {
    @apply rounded-l-none;
  }
  
  /* Blink animation */
  @keyframes blink {
    50% {
      opacity: 0;
    }
  }
  
  .blink {
    animation: blink 1s step-start infinite;
  }
  
  /* Card Stack Container */
  .card-stack-container {
    @apply w-full mt-4;
    @apply min-h-[500px];
    @apply flex justify-center lg:justify-start items-start;
  }
  
  .card-stack {
    @apply relative w-full max-w-4xl h-[500px];
    @apply flex justify-center lg:justify-start items-start;
  }
  
  /* Individual Card Stack Item */
  .card-stack-item {
    @apply absolute left-1/2 top-0;
    @apply cursor-pointer;
    transform: translateX(-50%);
    transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    z-index: var(--z-index, 0);
  }
  
  @media (min-width: 1024px) {
    .card-stack-item {
      @apply left-0;
      transform: translateX(0);
    }
  }
  
  /* Default stacked position */
  .card-stack-item:not(.hovered):not(.winner):not(.selected) {
    transform: translateX(calc(-50% + calc(var(--card-index) * 40px)));
  }
  
  @media (min-width: 1024px) {
    .card-stack-item:not(.hovered):not(.winner):not(.selected) {
      transform: translateX(calc(var(--card-index) * 40px));
    }
  }
  
  .card-stack-item:not(.hovered):not(.winner):not(.selected) .card-stack-content {
    transform: scale(0.95);
  }
  
  .card-stack-item:not(.hovered):not(.winner):not(.selected) .game-card {
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%) !important;
    color: transparent !important;
    border: 3px solid #e94560 !important;
  }
  
  .card-stack-item:not(.hovered):not(.winner):not(.selected) .game-card .card-title {
    visibility: hidden;
  }
  
  .card-stack-item:not(.hovered):not(.winner):not(.selected) .game-card .card-body {
    @apply flex items-center justify-center h-full;
  }
  
  /* Card back decoration */
  .card-stack-item:not(.hovered):not(.winner):not(.selected) .game-card::before {
    content: '?';
    @apply absolute top-1/2 left-1/2 text-7xl font-bold;
    transform: translate(-50%, -50%);
    color: rgba(233, 69, 96, 0.4);
    text-shadow: 0 0 20px rgba(233, 69, 96, 0.3);
  }
  
  .card-stack-item:not(.hovered):not(.winner):not(.selected) .game-card::after {
    content: '';
    @apply absolute inset-2.5 rounded-xl pointer-events-none;
    border: 2px dashed rgba(233, 69, 96, 0.3);
  }
  
  /* Hovered state */
  .card-stack-item.hovered {
    transform: translateX(-50%) translateY(-20px);
    z-index: 100 !important;
  }
  
  @media (min-width: 1024px) {
    .card-stack-item.hovered {
      transform: translateX(0) translateY(-20px);
    }
  }
  
  .card-stack-item.hovered .card-stack-content {
    @apply opacity-100;
    transform: scale(1);
    filter: blur(0);
  }
  
  /* Selected state */
  .card-stack-item.selected {
    transform: translateX(-50%) translateY(-10px);
    z-index: 101 !important;
  }
  
  @media (min-width: 1024px) {
    .card-stack-item.selected {
      transform: translateX(0) translateY(-10px);
    }
  }
  
  .card-stack-item.selected .game-card {
    box-shadow: 0 0 30px rgba(59, 130, 246, 0.6), 0 1rem 2rem rgba(59, 130, 246, 0.3) !important;
    @apply border-2 border-primary;
  }
  
  /* Winner state */
  .card-stack-item.winner {
    transform: translateX(-50%);
    z-index: 200 !important;
    animation: winnerPop 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
  }
  
  @media (min-width: 1024px) {
    .card-stack-item.winner {
      transform: translateX(0);
    }
  }
  
  .card-stack-item.winner .game-card {
    box-shadow: 0 0 40px rgba(255, 215, 0, 0.8), 0 1.5rem 3rem rgba(255, 215, 0, 0.4) !important;
    @apply border-[3px] border-yellow-400;
  }
  
  @keyframes winnerPop {
    0% {
      transform: translateX(-50%) scale(0.8);
      opacity: 0;
    }
    50% {
      transform: translateX(-50%) scale(1.1);
    }
    100% {
      transform: translateX(-50%) scale(1);
      opacity: 1;
    }
  }
  
  @media (min-width: 1024px) {
    @keyframes winnerPop {
      0% {
        transform: translateX(0) scale(0.8);
        opacity: 0;
      }
      50% {
        transform: translateX(0) scale(1.1);
      }
      100% {
        transform: translateX(0) scale(1);
        opacity: 1;
      }
    }
  }
  
  /* Card Content */
  .card-stack-content {
    @apply flex flex-col gap-2;
    @apply pointer-events-auto;
    transition: all 0.3s ease;
  }
  
  .stacked-card-wrapper {
    @apply mb-2;
  }
  
  .stacked-card-wrapper:last-child {
    @apply mb-0;
  }
  
  /* Card Info */
  .card-info {
    @apply absolute -bottom-10 left-1/2;
    @apply px-3 py-2 rounded-lg whitespace-nowrap;
    @apply opacity-0 pointer-events-none text-center;
    @apply bg-gray-900/90 dark:bg-black/90;
    transform: translateX(-50%);
    transition: opacity 0.3s ease;
  }
  
  .card-stack-item.hovered .card-info,
  .card-stack-item.winner .card-info,
  .card-stack-item.selected .card-info {
    @apply opacity-100;
  }
  
  .player-name {
    @apply font-bold text-base text-white;
    @apply flex items-center justify-center gap-1;
  }
  
  .winner-star {
    @apply text-xl;
    animation: starPulse 1.5s infinite;
  }
  
  @keyframes starPulse {
    0%, 100% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.2);
    }
  }
  
  .vote-count {
    @apply text-sm text-yellow-400 mt-1;
  }
  
  /* Voting Instructions */
  .voting-instructions {
    @apply text-center mt-4;
    @apply text-gray-500 dark:text-gray-400;
    @apply text-base;
  }
  
  /* Theme toggle button */
  .theme-toggle {
    @apply p-2 rounded-lg;
    @apply bg-gray-200 dark:bg-gray-700;
    @apply text-gray-700 dark:text-gray-200;
    @apply hover:bg-gray-300 dark:hover:bg-gray-600;
    @apply transition-colors duration-200;
    @apply cursor-pointer border-none;
  }

  /* Player Cards Stack (CardsTab) */
  .player-cards-stack-container {
    @apply w-full mt-4;
  }

  .player-cards-stack {
    @apply grid gap-6 justify-center mx-auto;
    grid-template-columns: repeat(4, auto);
  }

  /* Individual Player Card Item */
  .player-card-item {
    @apply cursor-pointer;
    transition: all 0.3s ease;
  }

  /* Hovered state */
  .player-card-item.hovered {
    transform: translateY(-10px);
  }

  /* Played state */
  .player-card-item.played {
    transform: translateY(-5px);
  }

  .player-card-item.played .game-card {
    box-shadow: 0 0 30px rgba(34, 197, 94, 0.6), 0 1rem 2rem rgba(34, 197, 94, 0.3) !important;
    @apply border-2 border-green-500;
  }

  /* Player Card Content */
  .player-card-content {
    @apply flex flex-col items-center;
  }

  .player-card-buttons {
    @apply flex gap-2 justify-center mt-3;
  }

  /* Response Cards Grid (RoundTab) */
  .response-cards-container {
    @apply w-full mt-4;
  }

  .response-cards-grid {
    @apply grid gap-6 justify-center mx-auto;
    grid-template-columns: repeat(4, auto);
  }

  /* Individual Response Card Item */
  .response-card-item {
    @apply cursor-pointer flex flex-col items-center;
    transition: all 0.3s ease;
  }

  /* Prompt card - always visible, no hover effects */
  .response-card-item.prompt-card {
    @apply cursor-default;
  }

  .response-card-item.prompt-card:hover {
    transform: none;
  }

  /* Default state - show card back */
  .response-card-item:not(.hovered):not(.winner):not(.prompt-card) .game-card {
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%) !important;
    color: transparent !important;
    border: 3px solid #e94560 !important;
  }

  .response-card-item:not(.hovered):not(.winner):not(.prompt-card) .game-card .card-title {
    visibility: hidden;
  }

  .response-card-item:not(.hovered):not(.winner):not(.prompt-card) .game-card .card-body {
    @apply flex items-center justify-center h-full;
  }

  /* Card back decoration */
  .response-card-item:not(.hovered):not(.winner):not(.prompt-card) .game-card::before {
    content: '?';
    @apply absolute top-1/2 left-1/2 text-7xl font-bold;
    transform: translate(-50%, -50%);
    color: rgba(233, 69, 96, 0.4);
    text-shadow: 0 0 20px rgba(233, 69, 96, 0.3);
  }

  .response-card-item:not(.hovered):not(.winner):not(.prompt-card) .game-card::after {
    content: '';
    @apply absolute inset-2.5 rounded-xl pointer-events-none;
    border: 2px dashed rgba(233, 69, 96, 0.3);
  }

  /* Hide info when not hovered or winner */
  .response-card-item:not(.hovered):not(.winner):not(.prompt-card) .response-card-info {
    @apply opacity-0;
  }

  /* Hovered state */
  .response-card-item.hovered {
    transform: translateY(-10px);
  }

  .response-card-item.hovered .response-card-info {
    @apply opacity-100;
  }

  /* Selected state */
  .response-card-item.selected .game-card {
    box-shadow: 0 0 40px rgba(59, 130, 246, 0.8), 0 1.5rem 3rem rgba(59, 130, 246, 0.5) !important;
    @apply border-[3px] border-primary;
    transform: scale(1.02);
  }

  /* Winner state */
  .response-card-item.winner {
    transform: translateY(-10px);
  }

  .response-card-item.winner .game-card {
    box-shadow: 0 0 40px rgba(255, 215, 0, 0.8), 0 1.5rem 3rem rgba(255, 215, 0, 0.4) !important;
    @apply border-[3px] border-yellow-400;
  }

  .response-card-item.winner .response-card-info {
    @apply opacity-100;
  }

  /* Response Card Content */
  .response-card-content {
    @apply flex flex-col items-center;
  }

  /* Response Card Info */
  .response-card-info {
    @apply mt-3 text-center;
    min-height: 3rem;
    transition: opacity 0.3s ease;
  }
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .card-stack {
    @apply max-w-full px-4;
  }
  
  .card-stack-item:not(.hovered):not(.winner):not(.selected) {
    transform: translateX(calc(-50% + calc(var(--card-index) * 25px)));
  }
  
  .game-card {
    width: 14rem !important;
    height: 380px !important;
  }
  
  .card-title {
    font-size: 1.25rem !important;
  }
  
  .card-stack-item.hovered {
    transform: translateX(-50%) translateY(-20px);
  }
  
  .card-stack-item.winner {
    transform: translateX(-50%);
  }

  .player-cards-stack {
    @apply gap-4 px-4;
    grid-template-columns: repeat(2, auto);
  }

  .response-cards-grid {
    @apply gap-4 px-4;
    grid-template-columns: repeat(2, auto);
  }
}

@media (max-width: 480px) {
  .card-stack-container {
    @apply min-h-[400px];
  }
  
  .card-stack {
    @apply h-[400px];
  }
  
  .card-stack-item:not(.hovered):not(.winner):not(.selected) {
    transform: translateX(calc(-50% + calc(var(--card-index) * 20px)));
  }
  
  .game-card {
    width: 12rem !important;
    height: 340px !important;
  }
  
  .card-title {
    font-size: 1.125rem !important;
  }

  .player-cards-stack {
    @apply px-3;
  }

  .response-cards-grid {
    @apply px-3;
  }
}

